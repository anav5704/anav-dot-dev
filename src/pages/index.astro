---
import ImageGrid from "@components/ImageGrid.astro";
import { getCollection } from "astro:content";
import Header from "@components/Header.astro";
import MainLayout from "@layouts/main.astro";
import { formatDate } from "@lib/format-date";

const unsortedSkills = await getCollection("skills");
const skills = unsortedSkills.sort((a, b) => a.data.id - b.data.id);

const unsortedProjects = await getCollection("projects");
const projects = unsortedProjects.sort((a, b) => a.data.id - b.data.id);

const unfiltereedBlgos = await getCollection("blogs");
const blogs = unfiltereedBlgos.filter((blog) => blog.data.featured == true);

const unfilderedResearch = await getCollection("research");
const research = unfilderedResearch.filter(
  (research) => research.data.featured == true
);
---

<MainLayout
  title="Anav Chand - Fullstack Web Dev From Fiji"
  description="Hey. I'm a 1st year Software Engineering student at the University of the South Pacific."
>
  <!-- HERO SECTION -->
  <article class="pb-5 space-y-3">
    <Header content=" Anav" subContent="" />
    <p>
      Hey! I'm a 1st year Software Engineering student at the
      <a href="https://www.usp.ac.fj/" target="_blank">
        University of the South Pacific
      </a> who might be a little <em>too</em> passionate about web development.
    </p>
  </article>
  <ImageGrid />
  <div id="skills"></div>

  <!-- SKILLS SECTION -->

  <h2>My Skills</h2>
  {
    skills.map((skill) => (
      <p>
        <span class="font-semibold">{skill.data.title}</span>
        {" - "}
        {skill.data.description}
        {skill.data.examples.map((example) => (
          <code class="mr-2 text-sm ">{example}</code>
        ))}
      </p>
    ))
  }
  <div id="projects"></div>
  <!-- PROJECTS SECTION -->

  <h2>Cool Projects</h2>

  {
    projects.map((project) => (
      <p>
        <a href={"projects/" + project.slug} class="font-semibold">
          {project.data.title}
        </a>
        {" - "}
        {project.data.description}
      </p>
    ))
  }
  <div id="blogs"></div>

  <!-- WRITINGS SECTION -->

  <h2>Blogs & Research</h2>

  {
    research.map((research) => (
      <div>
        <a href={"research/" + research.slug} class="font-semibold">
          {research.data.title}
        </a>
        <p class="faded">Research • {formatDate(research.data.date)}</p>
      </div>
    ))
  }
  {
    blogs.map((blog) => (
      <div>
        <a href={"blogs/" + blog.slug} class="font-semibold">
          {blog.data.title}
        </a>
        <p class="faded">Blog • {formatDate(blog.data.date)}</p>
      </div>
    ))
  }
</MainLayout>
